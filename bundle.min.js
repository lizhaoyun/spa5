var notepad={};function fontList(){var n,l=$('<div class="notepad-font-list"><input class="editetype" type="text"><br><ul class="list"></ul></div>'),o=l.find(".editetype"),s=l.find(".list"),i={container:"",list:[],select:0,width:"100px",isFont:!1,isFontStyle:!1,selectHandler:null};function a(t,e){switch(e){case"斜体":return void t.css({"font-style":"italic"});case"粗体":return void t.css({"font-weight":"bold"});case"粗偏斜体":return void t.css({"font-weight":"bold","font-style":"italic"})}}function e(){var t,e=$(i.container).find(".notepad-font-list");console.log(0!==e.length),0!==e.length&&e.remove(),$(i.container).append(l),l.css({width:i.width}),function(){var t,e=0;if(i.isFont)for(e=0;e<i.list.length;e++)(t=$('<li class="item"></li>')).css("font-family",i.list[e]),t.html(i.list[e]),s.append(t);else if(i.isFontStyle)for(e=0;e<i.list.length;e++)a(t=$('<li class="item"></li>'),i.list[e]),t.html(i.list[e]),s.append(t);else for(e=0;e<i.list.length;e++)(t=$('<li class="item"></li>')).html(i.list[e]),s.append(t);n=s.find(".item")}(),t=i.select,$(n[t]).addClass("selected"),o.val(i.list[t]),o.select()}this.show=function(t){$.extend(i,t),e(),s.click(function(t){$(n[i.select]).removeClass("selected"),i.select=i.list.indexOf($(t.target).html()),$(n[i.select]).addClass("selected"),o.val(i.list[i.select]),o.select(),i.selectHandler(i.select)}),o.keyup(function(){var t=0;for(t=0;t<i.list.length&&0!==i.list[t].indexOf(o.val());t++);t!==i.list.length&&(n[t].scrollIntoView({behavior:"smooth",block:"start"}),$(n[i.select]).removeClass("selected"),$(n[t]).addClass("selected"),i.select=t)})}}notepad.config={appContainer:".notepad-app"},notepad.bShowStatusBar=!1,notepad.bLineWrap=!1,notepad.fontFamily="Arial",notepad.fontStype="常规",notepad.fontSize="16",console.log("this is notepad.js"),notepad.fontHandler=function(t){notepad.fontFamily=t.family,notepad.fontStype=t.style,notepad.fontSize=t.size,showContent.setFont(t)},$(function(){$menubar.show(notepad.menuData),showContent.show(),showContent.setFont({family:notepad.fontFamily,style:notepad.fontStype,size:notepad.fontSize}),$(".notepad-editor").click(function(){console.log("nbj"),$menubar.hideMenu(),showContent.focus()})}),notepad.menuData=[{title:"文件(F)",menuItems:[{title:"新建(N)",shortcut:"Ctrl+N",enabled:!0,handler:function(){console.log("新建(N) menu clicked!")}},{title:"打开(O)...",shortcut:"Ctrl+O",enabled:!0,handler:function(){console.log("打开(O) menu clicked!")}},{title:"保存(S)",shortcut:"Ctrl+S",enabled:!0,handler:function(){console.log("保存(S) menu clicked!")}},{title:"另存为(A)...",shortcut:"",enabled:!0,handler:function(){console.log("另存为(A) menu clicked!")}},{title:"hr",shortcut:"",enabled:!0,handler:null},{title:"页面设置(U)...",shortcut:"",enabled:!0,handler:function(){console.log("页面设置(U) menu clicked!")}},{title:"打印(P)...",shortcut:"Ctrl+P",enabled:!0,handler:function(){console.log("打印(P) menu clicked!")}},{title:"hr",shortcut:"",enabled:!0,handler:null},{title:"退出(X)",shortcut:"",enabled:!0,handler:function(){console.log("退出(X) menu clicked!")}}],width:"202px",left:"0px"},{title:"编辑(E)",menuItems:[{title:"撤销(U)",shortcut:"Ctrl+Z",enabled:!1,handler:function(){console.log("撤销(U) menu clicked!")}},{title:"hr",shortcut:"",enabled:!0,handler:null},{title:"剪切(T)",shortcut:"Ctrl+X",enabled:!0,handler:function(){console.log("剪切(X) menu clicked!")}},{title:"复制(C)",shortcut:"Ctrl+C",enabled:!1,handler:function(){console.log("复制(C) menu clicked!")}},{title:"粘贴(P)",shortcut:"Ctrl+V",enabled:!1,handler:function(){console.log("粘贴(P) menu clicked!")}},{title:"删除(L)",shortcut:"Del",enabled:!1,handler:function(){console.log("删除(L) menu clicked!")}},{title:"hr",shortcut:"",enabled:!0,handler:null},{title:"使用 Bing 搜索...",shortcut:"Ctrl+E",enabled:!0,handler:function(){console.log("使用 Bing 搜索 menu clicked!")}},{title:"查找(F)...",shortcut:"Ctrl+F",enabled:!1,handler:function(){console.log("查找(F) menu clicked!")}},{title:"查找下一个(N)",shortcut:"F3",enabled:!1,handler:function(){console.log("查找下一个(N) menu clicked!")}},{title:"替换(R)...",shortcut:"Ctrl+H",enabled:!0,handler:function(){console.log("替换(R) menu clicked!")}},{title:"转到(G)...",shortcut:"Ctrl+G",enabled:!0,handler:function(){console.log("转到(G) menu clicked!")}},{title:"hr",shortcut:"",enabled:!0,handler:null},{title:"全选(A)",shortcut:"Ctrl+A",enabled:!0,handler:function(){console.log("全选(A) menu clicked!")}},{title:"时间/日期(D)",shortcut:"F5",enabled:!0,handler:function(){console.log("时间/日期(D) menu clicked!")}}],width:"218px",left:"78px"},{title:"格式(O)",menuItems:[{title:"自动换行(W)",shortcut:"",enabled:!0,handler:function(){console.log("自动换行(W) menu clicked!")}},{title:"字体(F)...",shortcut:"",enabled:!0,handler:function(){console.log("字体(F) menu clicked!"),$dlgFont.show({family:notepad.fontFamily,style:notepad.fontStyle,size:notepad.fontSize,okHandler:notepad.fontHandler})}}],width:"145px",left:"160px"},{title:"查看(V)",menuItems:[{title:"状态栏(S)",shortcut:"",enabled:!0,handler:function(){notepad.bShowStatusBar=!notepad.bShowStatusBar,$menubar.checked(3,0,notepad.bShowStatusBar)}}],width:"115px",left:"240px"},{title:"帮助(H)",menuItems:[{title:"查看帮助(H)",shortcut:"",enabled:!0,handler:function(){console.log("查看帮助(H) menu clicked!")}},{title:"关于记事本(A)",shortcut:"",enabled:!0,handler:function(){console.log("A menu clicked!")}}],width:"145px",left:"320px"}];var $dlgFont=function(){var o=$('<div class="notepad-dlg-mask notepad-dlg-font"><div class="dialogbox notepad-dlgbox"><div class="notepad-dlg-titlebar"><p class="title">字体</p><span class="close-btn">✖</span></div><div class="main notepad-dlg-main"><div class="font-family"><p>字体(F):</p></div><div class="font-style"><p>字形(Y):</p></div><div class="font-size"><p>大小(S):</p></div><fieldset class="sample"><legend>示例</legend><p class="sample-txt">AaBbYyZz</p></fieldset><div class="script"><label>脚本(R):<br><select><option value="西欧语言">西欧语言</option><option value="中文 GB2312">中文 GB2312</option></select></label></div><input class="btn-ok btn" type="button" value="确定"><input class="btn-cancel btn" type="button" value="取消"></div></div></div>'),s={family:"Arial",style:"常规",size:"16",okHandler:null},i=o.find(".btn-ok"),a=o.find(".close-btn"),c=o.find(".btn-cancel"),t=o.find(".sample-txt"),d=o.find(".notepad-dlg-titlebar");function r(){t.css({"font-family":s.family,"font-size":s.size+"pt"}),"常规"!==s.style?"斜体"!==s.style?"粗体"!==s.style?"粗偏斜体"!==s.style||t.css({"font-weight":"bold","font-style":"italic"}):t.css({"font-weight":"bold"}):t.css({"font-style":"italic"}):t.css({"font-style":"normal"})}function u(){o.remove()}return o.click(function(t){t.stopPropagation()}),{show:function(t){var e,n,l;$.extend(s,t),$("body").append(o),e=["Agency FB","Algerian","Arial","Arial Rounded MT","Axure Handwriting","Bahnschrift","Baskerville Old Face","Bauhaus 93","Bell MT","Berlin Sans FB","Bernard MT","BlackAdder ITC"],n=["常规","斜体","粗体","粗偏斜体"],l=["8","9","10","11","12","14","16","18","20","22","24","26","28","36","48","72"],console.log(",,,,,,,"),(new fontList).show({container:".notepad-dlg-font .font-family",width:"176px",list:e,isFont:!0,select:e.indexOf(s.family),selectHandler:function(t){console.log(e[t]),s.family=e[t],r()}}),(new fontList).show({container:".notepad-dlg-font .font-style",width:"132px",list:n,select:n.indexOf(s.style),isFontStyle:!0,selectHandler:function(t){console.log(n[t]),s.style=n[t],r()}}),(new fontList).show({container:".notepad-dlg-font .font-size",width:"64px",list:l,select:l.indexOf(s.size),selectHandler:function(t){console.log(l[t]),s.size=l[t],r()}}),o.find(".dialogbox").draggable({handle:d}),a.click(u),c.click(u),i.click(function(){s.okHandler({family:s.family,style:s.style,size:s.size}),u()})}}}(),showContent=function(){var e=$('<div class="notepad-editor"><textarea spellcheck="false"></textarea></div>'),n={wrap:!1},l=e.find("textarea");function o(t){t?(l.attr("wrap","soft"),l.css({"overflow-x":"hidden"})):(l.attr("wrap","off"),l.css({"overflow-x":"scroll"}))}return console.log("显示。。。"),l.mousedown(function(){0}),l.mouseup(function(){0}),{show:function(t){$.extend(n,t),$("body").append(e),l.trigger("focus"),o(n.wrap)},resize:function(t){t?e.css({bottom:"21px"}):e.css({bottom:"0"})},focus:function(){l.focus()},setWrap:o,setFont:function(t){l.css({"font-family":t.family,"font-size":t.size+"pt"}),"斜体"!==t.style?"粗体"!==t.style?"粗偏斜体"!==t.style||l.css({"font-weight":"bold","font-style":"italic"}):l.css({"font-weight":"bold"}):l.css({"font-style":"italic"})}}}(),$menubar=function(){var c,d=$('<div class="menubar"></div>'),r=[],u=-1;function e(){!function(){for(var t=$('<ul class="note-title"></ul>'),e=0;e<c.length;e++){console.log(c[e].title);var n=$('<li class="title"></li>');n.html(c[e].title),n.attr("data-id",e),t.append(n),n.click(function(){var t=Number(this.dataset.id);u=-1===u?(r[t].css({display:"inline-block"}),t):u!==t?(r[u].css({display:"none"}),r[t].css({display:"inline-block"}),t):(r[u].css({display:"none"}),-1)}),n.hover(function(){if(-1!==u){var t=Number(this.dataset.id);r[u].css({display:"none"}),r[t].css({display:"inline-block"}),u=t}})}d.append(t),$(".main").append(d)}(),function(){for(var t=0;t<c.length;t++){for(var e=$('<ul class="details"></ul>'),n=c[t].menuItems,l=0;l<n.length;l++)switch(n[l].title){case"hr":var o=$('<li class="menuhr"></li>');e.append(o);break;default:var s=$('<li class="menuitems"></li>'),i=$('<span class="shortcut"></span>');if(s.html(n[l].title),i.html(n[l].shortcut),s.html(n[l].title),s.attr("data-x",t),s.attr("data-y",l),""!==n[l].shortcut){var a=$('<span class="kjkey"></span>');a.html(n[l].shortcut),s.append(a)}n[l].enabled||s.addClass("forbid"),s.append(i),e.append(s),s.click(function(){if(!$(this).hasClass("forbid")){var t=this.dataset.x,e=this.dataset.y;c[t].menuItems[e].handler(),r[t].css({display:"none"}),u=-1}})}e.css({width:c[t].width,left:c[t].left,display:"none"}),d.append(e),r.push(e)}}(),$("body").append(d)}return console.log("dsfads"),{show:function(t){c=t,e()},checked:function(t,e,n){var l=r[t].find(".menu-item")[e];n?$(l).prepend($('<span class="checked">✓</span>')[0]):$(l).find(".checked").remove()},enabled:function(t,e,n){var l=r[t].find(".menu-item")[e];n?$(l).removeClass("kjkey"):$(l).addClass("kjkey")},hideMenu:function(){-1!==u&&(r[u].css({display:"none"}),u=-1)}}}();